{"ast":null,"code":"var _jsxFileName = \"/Users/chrisdelaney/Downloads/games/georgetownguessr/src/components/Map/Map.js\",\n  _s = $RefreshSig$();\nimport React, { useState } from \"react\";\nimport { GoogleMap, Marker } from '@react-google-maps/api';\nimport \"./Map.css\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport default function Map(props) {\n  _s();\n  const [mapCenter, setMapCenter] = useState({\n    lat: 38.90899666691537,\n    lng: -77.067332462228\n  });\n  const [markerPosition, setMarkerPosition] = useState(null);\n  const minZoomLevel = 14;\n  const onMapClick = event => {\n    const dist = calculateDistance(props.currentImgData.lat, props.currentImgData.lng, event.latLng.lat(), event.latLng.lng());\n    console.log(`distance: ${dist} meters`);\n    const score = calculateExponentialScore(dist);\n    console.log(`score: ${score} pts`);\n    props.setCurrentScore(score);\n    setMarkerPosition({\n      lat: event.latLng.lat(),\n      lng: event.latLng.lng()\n    });\n  };\n  const mapOptions = {\n    mapTypeControl: false,\n    fullscreenControl: false,\n    clickableIcons: false,\n    disableDoubleClickZoom: true,\n    streetViewControl: false,\n    minZoom: minZoomLevel\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"map__wrapper\",\n    children: /*#__PURE__*/_jsxDEV(GoogleMap, {\n      mapContainerStyle: {\n        height: \"90%\",\n        width: \"100%\",\n        top: 0,\n        outline: \"none\"\n      },\n      zoom: 14,\n      center: mapCenter,\n      onClick: onMapClick,\n      options: mapOptions,\n      children: markerPosition && /*#__PURE__*/_jsxDEV(Marker, {\n        position: markerPosition\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 44,\n        columnNumber: 36\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 37,\n      columnNumber: 13\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 36,\n    columnNumber: 9\n  }, this);\n}\n_s(Map, \"Up+a5t4skPE5a6cuoKhCQSqMSqE=\");\n_c = Map;\nfunction calculateDistance(lat1, lon1, lat2, lon2) {\n  const R = 6371e3; // Radius of the Earth in meters\n  const φ1 = lat1 * Math.PI / 180; // φ, λ in radians\n  const φ2 = lat2 * Math.PI / 180;\n  const Δφ = (lat2 - lat1) * Math.PI / 180;\n  const Δλ = (lon2 - lon1) * Math.PI / 180;\n\n  // Haversine formula\n  const a = Math.sin(Δφ / 2) * Math.sin(Δφ / 2) + Math.cos(φ1) * Math.cos(φ2) * Math.sin(Δλ / 2) * Math.sin(Δλ / 2);\n  const c = 2 * Math.atan2(Math.sqrt(a), Math.sqrt(1 - a));\n  const distance = R * c; // Distance in meters\n\n  return Math.floor(distance);\n}\nfunction calculateExponentialScore(dist) {\n  const maxDistance = 1000; // Maximum distance for scoring\n  const minScore = 0; // Minimum score at or beyond max distance\n  const maxScore = 1000; // Maximum score for being very close\n\n  if (dist <= 10) {\n    return maxScore;\n  } else if (dist > 10 && dist <= maxDistance) {\n    // Refined approach for exponential decay\n    // Adjust the decay factor directly to shape the curve\n    const decayFactor = -0.005; // Adjust this value to control the rate of decay\n    const score = maxScore * Math.exp(decayFactor * (dist - 10));\n\n    // Ensure score never drops below minScore\n    return Math.floor(Math.max(score, minScore));\n  } else {\n    return minScore;\n  }\n}\nfunction calculateLinearScore(dist) {\n  if (dist < 10) {\n    return 1000;\n  } else {\n    return Math.max(1010 - dist, 0);\n  }\n}\nvar _c;\n$RefreshReg$(_c, \"Map\");","map":{"version":3,"names":["React","useState","GoogleMap","Marker","jsxDEV","_jsxDEV","Map","props","_s","mapCenter","setMapCenter","lat","lng","markerPosition","setMarkerPosition","minZoomLevel","onMapClick","event","dist","calculateDistance","currentImgData","latLng","console","log","score","calculateExponentialScore","setCurrentScore","mapOptions","mapTypeControl","fullscreenControl","clickableIcons","disableDoubleClickZoom","streetViewControl","minZoom","className","children","mapContainerStyle","height","width","top","outline","zoom","center","onClick","options","position","fileName","_jsxFileName","lineNumber","columnNumber","_c","lat1","lon1","lat2","lon2","R","φ1","Math","PI","φ2","Δφ","Δλ","a","sin","cos","c","atan2","sqrt","distance","floor","maxDistance","minScore","maxScore","decayFactor","exp","max","calculateLinearScore","$RefreshReg$"],"sources":["/Users/chrisdelaney/Downloads/games/georgetownguessr/src/components/Map/Map.js"],"sourcesContent":["import React, { useState } from \"react\";\nimport { GoogleMap, Marker } from '@react-google-maps/api';\n\nimport \"./Map.css\";\n\nexport default function Map(props) {\n    const [mapCenter, setMapCenter] = useState({ lat: 38.90899666691537, lng: -77.067332462228 });\n    const [markerPosition, setMarkerPosition] = useState(null);\n    const minZoomLevel = 14;\n\n    const onMapClick = (event) => {\n        const dist = calculateDistance(props.currentImgData.lat, props.currentImgData.lng, event.latLng.lat(), event.latLng.lng());\n        console.log(`distance: ${dist} meters`);\n        const score = calculateExponentialScore(dist);\n        console.log(`score: ${score} pts`)\n\n        props.setCurrentScore(score);\n        \n\n        setMarkerPosition({\n            lat: event.latLng.lat(),\n            lng: event.latLng.lng()\n        });\n    };\n\n    const mapOptions = {\n        mapTypeControl: false,\n        fullscreenControl: false,\n        clickableIcons: false,\n        disableDoubleClickZoom: true,\n        streetViewControl: false,\n        minZoom: minZoomLevel\n    };\n\n    return (\n        <div className=\"map__wrapper\">\n            <GoogleMap\n                mapContainerStyle={{ height: \"90%\", width: \"100%\", top: 0, outline: \"none\",}}\n                zoom={14}\n                center={mapCenter}\n                onClick={onMapClick}\n                options={mapOptions}\n            >\n                {markerPosition && <Marker position={markerPosition} />}\n            </GoogleMap>\n        </div>\n    );\n}\n\nfunction calculateDistance(lat1, lon1, lat2, lon2) {\n    const R = 6371e3; // Radius of the Earth in meters\n    const φ1 = lat1 * Math.PI / 180; // φ, λ in radians\n    const φ2 = lat2 * Math.PI / 180;\n    const Δφ = (lat2 - lat1) * Math.PI / 180;\n    const Δλ = (lon2 - lon1) * Math.PI / 180;\n\n    // Haversine formula\n    const a = Math.sin(Δφ / 2) * Math.sin(Δφ / 2) +\n              Math.cos(φ1) * Math.cos(φ2) *\n              Math.sin(Δλ / 2) * Math.sin(Δλ / 2);\n    const c = 2 * Math.atan2(Math.sqrt(a), Math.sqrt(1 - a));\n    const distance = R * c; // Distance in meters\n\n    return Math.floor(distance);\n}\n\nfunction calculateExponentialScore(dist) {\n    const maxDistance = 1000; // Maximum distance for scoring\n    const minScore = 0; // Minimum score at or beyond max distance\n    const maxScore = 1000; // Maximum score for being very close\n\n    if (dist <= 10) {\n        return maxScore;\n    } else if (dist > 10 && dist <= maxDistance) {\n        // Refined approach for exponential decay\n        // Adjust the decay factor directly to shape the curve\n        const decayFactor = -0.005; // Adjust this value to control the rate of decay\n        const score = maxScore * Math.exp(decayFactor * (dist - 10));\n\n        // Ensure score never drops below minScore\n        return Math.floor(Math.max(score, minScore));\n    } else {\n        return minScore;\n    }\n}\n\nfunction calculateLinearScore (dist) {\n    if (dist < 10) {\n        return 1000;\n    }\n    else {\n        return Math.max(1010 - dist, 0);\n    }\n}\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}