{"ast":null,"code":"var _jsxFileName = \"/Users/chrisdelaney/Downloads/games/georgetownguessr/src/components/Map/Map.js\",\n  _s = $RefreshSig$();\nimport React, { useState } from \"react\";\nimport { GoogleMap, Marker } from '@react-google-maps/api';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport default function Map(props) {\n  _s();\n  const [mapCenter, setMapCenter] = useState({\n    lat: 38.90899666691537,\n    lng: -77.067332462228\n  });\n  const [markerPosition, setMarkerPosition] = useState(null);\n  const minZoomLevel = 14;\n  const onMapClick = event => {\n    console.log(event.latLng.lat(), event.latLng.lng());\n    console.log(props.imgCoords.latitude, props.imgCoords.longitude);\n    const dist = calculateDistance(props.imgCoords.latitude, props.imgCoords.longitude, event.latLng.lat(), event.latLng.lng());\n    console.log(`distance: ${dist} meters`);\n    const score = calculateExponentialScore(dist);\n    console.log(`score: ${score} pts`);\n    setMarkerPosition({\n      lat: event.latLng.lat(),\n      lng: event.latLng.lng()\n    });\n  };\n  const mapOptions = {\n    mapTypeControl: false,\n    fullscreenControl: false,\n    clickableIcons: false,\n    disableDoubleClickZoom: true,\n    minZoom: minZoomLevel\n  };\n  return /*#__PURE__*/_jsxDEV(GoogleMap, {\n    mapContainerStyle: {\n      height: \"50vh\",\n      width: \"50%\",\n      outline: \"none\"\n    },\n    zoom: 14,\n    center: mapCenter,\n    onClick: onMapClick,\n    options: mapOptions,\n    children: markerPosition && /*#__PURE__*/_jsxDEV(Marker, {\n      position: markerPosition\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 40,\n      columnNumber: 32\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 33,\n    columnNumber: 9\n  }, this);\n}\n_s(Map, \"Up+a5t4skPE5a6cuoKhCQSqMSqE=\");\n_c = Map;\nfunction calculateDistance(lat1, lon1, lat2, lon2) {\n  const R = 6371e3; // Radius of the Earth in meters\n  const φ1 = lat1 * Math.PI / 180; // φ, λ in radians\n  const φ2 = lat2 * Math.PI / 180;\n  const Δφ = (lat2 - lat1) * Math.PI / 180;\n  const Δλ = (lon2 - lon1) * Math.PI / 180;\n\n  // Haversine formula\n  const a = Math.sin(Δφ / 2) * Math.sin(Δφ / 2) + Math.cos(φ1) * Math.cos(φ2) * Math.sin(Δλ / 2) * Math.sin(Δλ / 2);\n  const c = 2 * Math.atan2(Math.sqrt(a), Math.sqrt(1 - a));\n  const distance = R * c; // Distance in meters\n\n  return Math.floor(distance);\n}\nfunction calculateExponentialScore(dist) {\n  const maxDistance = 1000; // Maximum distance for scoring\n  const minScore = 0; // Minimum score at or beyond max distance\n  const maxScore = 1000; // Maximum score for being very close\n\n  if (dist <= 10) {\n    return maxScore;\n  } else if (dist > 10 && dist <= maxDistance) {\n    // Refined approach for exponential decay\n    // Adjust the decay factor directly to shape the curve\n    const decayFactor = -0.005; // Adjust this value to control the rate of decay\n    const score = maxScore * Math.exp(decayFactor * (dist - 10));\n\n    // Ensure score never drops below minScore\n    return Math.floor(Math.max(score, minScore));\n  } else {\n    return minScore;\n  }\n}\nfunction calculateLinearScore(dist) {\n  if (dist < 10) {\n    return 1000;\n  } else {\n    return Math.max(1010 - dist, 0);\n  }\n}\nvar _c;\n$RefreshReg$(_c, \"Map\");","map":{"version":3,"names":["React","useState","GoogleMap","Marker","jsxDEV","_jsxDEV","Map","props","_s","mapCenter","setMapCenter","lat","lng","markerPosition","setMarkerPosition","minZoomLevel","onMapClick","event","console","log","latLng","imgCoords","latitude","longitude","dist","calculateDistance","score","calculateExponentialScore","mapOptions","mapTypeControl","fullscreenControl","clickableIcons","disableDoubleClickZoom","minZoom","mapContainerStyle","height","width","outline","zoom","center","onClick","options","children","position","fileName","_jsxFileName","lineNumber","columnNumber","_c","lat1","lon1","lat2","lon2","R","φ1","Math","PI","φ2","Δφ","Δλ","a","sin","cos","c","atan2","sqrt","distance","floor","maxDistance","minScore","maxScore","decayFactor","exp","max","calculateLinearScore","$RefreshReg$"],"sources":["/Users/chrisdelaney/Downloads/games/georgetownguessr/src/components/Map/Map.js"],"sourcesContent":["import React, { useState } from \"react\";\nimport { GoogleMap, Marker } from '@react-google-maps/api';\n\nexport default function Map(props) {\n    const [mapCenter, setMapCenter] = useState({ lat: 38.90899666691537, lng: -77.067332462228 });\n    const [markerPosition, setMarkerPosition] = useState(null);\n    const minZoomLevel = 14;\n\n    const onMapClick = (event) => {\n        console.log(event.latLng.lat(), event.latLng.lng());\n        console.log(props.imgCoords.latitude, props.imgCoords.longitude);\n        const dist = calculateDistance(props.imgCoords.latitude, props.imgCoords.longitude, event.latLng.lat(), event.latLng.lng());\n        console.log(`distance: ${dist} meters`);\n        const score = calculateExponentialScore(dist);\n        console.log(`score: ${score} pts`)\n        \n\n        setMarkerPosition({\n            lat: event.latLng.lat(),\n            lng: event.latLng.lng()\n        });\n    };\n\n    const mapOptions = {\n        mapTypeControl: false,\n        fullscreenControl: false,\n        clickableIcons: false,\n        disableDoubleClickZoom: true,\n        minZoom: minZoomLevel\n    };\n\n    return (\n        <GoogleMap\n            mapContainerStyle={{ height: \"50vh\", width: \"50%\", outline: \"none\",}}\n            zoom={14}\n            center={mapCenter}\n            onClick={onMapClick}\n            options={mapOptions}\n        >\n            {markerPosition && <Marker position={markerPosition} />}\n        </GoogleMap>\n    );\n}\n\nfunction calculateDistance(lat1, lon1, lat2, lon2) {\n    const R = 6371e3; // Radius of the Earth in meters\n    const φ1 = lat1 * Math.PI / 180; // φ, λ in radians\n    const φ2 = lat2 * Math.PI / 180;\n    const Δφ = (lat2 - lat1) * Math.PI / 180;\n    const Δλ = (lon2 - lon1) * Math.PI / 180;\n\n    // Haversine formula\n    const a = Math.sin(Δφ / 2) * Math.sin(Δφ / 2) +\n              Math.cos(φ1) * Math.cos(φ2) *\n              Math.sin(Δλ / 2) * Math.sin(Δλ / 2);\n    const c = 2 * Math.atan2(Math.sqrt(a), Math.sqrt(1 - a));\n    const distance = R * c; // Distance in meters\n\n    return Math.floor(distance);\n}\n\nfunction calculateExponentialScore(dist) {\n    const maxDistance = 1000; // Maximum distance for scoring\n    const minScore = 0; // Minimum score at or beyond max distance\n    const maxScore = 1000; // Maximum score for being very close\n\n    if (dist <= 10) {\n        return maxScore;\n    } else if (dist > 10 && dist <= maxDistance) {\n        // Refined approach for exponential decay\n        // Adjust the decay factor directly to shape the curve\n        const decayFactor = -0.005; // Adjust this value to control the rate of decay\n        const score = maxScore * Math.exp(decayFactor * (dist - 10));\n\n        // Ensure score never drops below minScore\n        return Math.floor(Math.max(score, minScore));\n    } else {\n        return minScore;\n    }\n}\n\nfunction calculateLinearScore (dist) {\n    if (dist < 10) {\n        return 1000;\n    }\n    else {\n        return Math.max(1010 - dist, 0);\n    }\n}\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}